<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Barang Masuk Sosprom - SIWARAS UT</title>
    <link rel="stylesheet" href="../../assets/style/main.css" />
    <link rel="stylesheet" href="../../assets/style/dashboard.css" />
    <link rel="stylesheet" href="../../assets/style/stokBarang.css" />
    <link rel="stylesheet" href="../../assets/style/toast.css" />
</head>

<body>
    <!-- Loader -->
    <div id="loader" class="loader-overlay">
        <div class="spinner"></div>
        <span>Loading...</span>
    </div>

    <div class="dashboard-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <img src="../../assets/icon/logo-ut.png" alt="Logo UT" class="sidebar-logo" />
                <span class="sidebar-brand">SIWARAS UT</span>
            </div>

            <nav class="sidebar-nav">
                <a href="adminSosprom.html" class="nav-item">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z" />
                    </svg>
                    <span>Beranda</span>
                    <svg class="nav-arrow" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z" />
                    </svg>
                </a>

                <a href="barangMasukSosprom.html" class="nav-item active">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14zM11 7h2v2h-2zm0 4h2v6h-2z" />
                    </svg>
                    <span>Barang Masuk</span>
                    <svg class="nav-arrow" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z" />
                    </svg>
                </a>

                <a href="stokBarangSosprom.html" class="nav-item">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M20 6h-2.18c.11-.31.18-.65.18-1a2.996 2.996 0 0 0-5.5-1.65l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 11 8.76l1-1.36 1 1.36L15.38 12 17 10.83 14.92 8H20v6z" />
                    </svg>
                    <span>Stok Barang</span>
                    <svg class="nav-arrow" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z" />
                    </svg>
                </a>

                <a href="tandaTerimaSosprom.html" class="nav-item">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z" />
                    </svg>
                    <span>Tanda Terima</span>
                    <svg class="nav-arrow" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z" />
                    </svg>
                </a>
            </nav>

            <div class="sidebar-footer">
                <button class="btn-logout-sidebar" onclick="handleLogout()">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M16 13v-2H7V8l-5 4 5 4v-3z" />
                        <path
                            d="M20 3h-9c-1.103 0-2 .897-2 2v4h2V5h9v14h-9v-4H9v4c0 1.103.897 2 2 2h9c1.103 0 2-.897 2-2V5c0-1.103-.897-2-2-2z" />
                    </svg>
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="dashboard-header">
                <h1 class="dashboard-title">Barang Masuk Sosprom</h1>
                <div class="header-actions">
                    <!-- Theme Toggle Button -->
                    <button class="theme-toggle" onclick="toggleTheme()" title="Toggle Theme">
                        <svg class="sun-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                            fill="currentColor">
                            <path
                                d="M12 2.25a.75.75 0 01.75.75v2.25a.75.75 0 01-1.5 0V3a.75.75 0 01.75-.75zM7.5 12a4.5 4.5 0 119 0 4.5 4.5 0 01-9 0zM18.894 6.166a.75.75 0 00-1.06-1.06l-1.591 1.59a.75.75 0 101.06 1.061l1.591-1.59zM21.75 12a.75.75 0 01-.75.75h-2.25a.75.75 0 010-1.5H21a.75.75 0 01.75.75zM17.834 18.894a.75.75 0 001.06-1.06l-1.59-1.591a.75.75 0 10-1.061 1.06l1.59 1.591zM12 18a.75.75 0 01.75.75V21a.75.75 0 01-1.5 0v-2.25A.75.75 0 0112 18zM7.758 17.303a.75.75 0 00-1.061-1.06l-1.591 1.59a.75.75 0 001.06 1.061l1.591-1.59zM6 12a.75.75 0 01-.75.75H3a.75.75 0 010-1.5h2.25A.75.75 0 016 12zM6.697 7.757a.75.75 0 001.06-1.06l-1.59-1.591a.75.75 0 00-1.061 1.06l1.59 1.591z" />
                        </svg>
                        <svg class="moon-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                            fill="currentColor">
                            <path fill-rule="evenodd"
                                d="M9.528 1.718a.75.75 0 01.162.819A8.97 8.97 0 009 6a9 9 0 009 9 8.97 8.97 0 003.463-.69.75.75 0 01.981.98 10.503 10.503 0 01-9.694 6.46c-5.799 0-10.5-4.701-10.5-10.5 0-4.368 2.667-8.112 6.46-9.694a.75.75 0 01.818.162z"
                                clip-rule="evenodd" />
                        </svg>
                    </button>
                    <button class="btn-profile">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                            <path
                                d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z" />
                        </svg>
                    </button>
                </div>
            </header>

            <div class="stok-barang-section">
                <div class="stok-header">
                    <div class="search-sort-wrapper">
                        <div class="search-box">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                                <path
                                    d="M10 18a7.952 7.952 0 0 0 4.897-1.688l4.396 4.396 1.414-1.414-4.396-4.396A7.952 7.952 0 0 0 18 10c0-4.411-3.589-8-8-8s-8 3.589-8 8 3.589 8 8 8zm0-14c3.309 0 6 2.691 6 6s-2.691 6-6 6-6-2.691-6-6 2.691-6 6-6z" />
                            </svg>
                            <input type="text" id="searchInput" placeholder="Cari Di Sini!" />
                        </div>
                        <button class="sort-btn" onclick="toggleSort()">
                            <span>A</span>
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M7 10l5 5 5-5z" />
                            </svg>
                            <span>Z</span>
                        </button>
                    </div>
                    <button class="btn-add" onclick="openAddModal()">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" />
                        </svg>
                        Tambah Barang Masuk
                    </button>
                </div>

                <div class="table-wrapper">
                    <table class="stok-table">
                        <thead>
                            <tr>
                                <th>NO</th>
                                <th>ID Barang Masuk</th>
                                <th>Tanggal</th>
                                <th>Kode Barang</th>
                                <th>Nama Barang</th>
                                <th>Jumlah</th>
                                <th>Satuan</th>
                                <th>Keterangan</th>
                                <th>Aksi</th>
                            </tr>
                        </thead>
                        <tbody id="tableBody">
                            <tr>
                                <td colspan="9" style="text-align: center; padding: 40px">
                                    Memuat data...
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </main>
    </div>

    <!-- Modal Add/Edit Barang Masuk -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Tambah Barang Masuk</h2>
                <button class="btn-close" onclick="closeModal()">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" />
                    </svg>
                </button>
            </div>
            <form id="barangMasukForm">
                <input type="hidden" id="editMode" value="false" />
                <input type="hidden" id="originalIdBm" value="" />

                <div class="form-group">
                    <label for="tanggal">Tanggal Masuk</label>
                    <input type="date" id="tanggal" class="form-control" required />
                </div>

                <!-- Mode Selection -->
                <div class="form-group" id="modeSelectionGroup">
                    <label>Mode Input Barang</label>
                    <div class="mode-selection">
                        <label class="mode-option">
                            <input type="radio" name="inputMode" value="new" checked
                                onchange="switchInputMode('new')" />
                            <span>Barang Baru</span>
                        </label>
                        <label class="mode-option">
                            <input type="radio" name="inputMode" value="existing"
                                onchange="switchInputMode('existing')" />
                            <span>Barang Existing</span>
                        </label>
                    </div>
                </div>

                <!-- Existing Barang Selection (Hidden by default) -->
                <div class="form-group" id="existingBarangGroup" style="display: none;">
                    <label for="existingBarang">Pilih Barang</label>
                    <select id="existingBarang" class="form-control" onchange="fillExistingBarangData()">
                        <option value="">-- Pilih Barang --</option>
                    </select>
                    <small class="form-hint">Pilih barang yang sudah ada untuk menambah stok</small>
                </div>

                <!-- New Barang Input (Visible by default) -->
                <div id="newBarangGroup">
                    <div class="form-group">
                        <label for="kodeBarang">Kode Barang</label>
                        <input type="text" id="kodeBarang" class="form-control" required
                            placeholder="Masukkan kode barang" />
                        <small class="form-hint">Kode unik untuk identifikasi barang</small>
                    </div>

                    <div class="form-group">
                        <label for="namaBarang">Nama Barang</label>
                        <input type="text" id="namaBarang" class="form-control" required
                            placeholder="Masukkan nama barang" />
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="satuan">Satuan</label>
                            <input type="text" id="satuan" class="form-control" required
                                placeholder="Unit, Pcs, Box, dll" />
                        </div>
                        <div class="form-group">
                            <label for="jumlah">Jumlah</label>
                            <input type="number" id="jumlah" class="form-control" required min="1" placeholder="0" />
                        </div>
                    </div>
                </div>

                <!-- Existing Barang Details (Hidden by default) -->
                <div id="existingBarangDetails" style="display: none;">
                    <div class="existing-info-card">
                        <h4>Detail Barang</h4>
                        <div class="info-row">
                            <span class="label">Kode Barang:</span>
                            <span class="value" id="displayKodeBarang">-</span>
                        </div>
                        <div class="info-row">
                            <span class="label">Nama Barang:</span>
                            <span class="value" id="displayNamaBarang">-</span>
                        </div>
                        <div class="info-row">
                            <span class="label">Satuan:</span>
                            <span class="value" id="displaySatuan">-</span>
                        </div>
                        <div class="info-row">
                            <span class="label">Stok Saat Ini:</span>
                            <span class="value" id="displayStok">0</span>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="jumlahExisting">Jumlah Tambah Stok</label>
                        <input type="number" id="jumlahExisting" class="form-control" required min="1"
                            placeholder="0" />
                        <small class="form-hint">Jumlah barang yang akan ditambahkan ke stok</small>
                    </div>
                </div>

                <div class="form-group">
                    <label for="keterangan">Keterangan</label>
                    <textarea id="keterangan" class="form-control" rows="3"
                        placeholder="Keterangan tambahan (opsional)"></textarea>
                </div>

                <div class="modal-actions">
                    <button type="button" class="btn-cancel" onclick="closeModal()">Batal</button>
                    <button type="submit" class="btn-submit">Simpan</button>
                </div>
            </form>
        </div>
    </div>

    <script src="../../script/config.js"></script>
    <script src="../../script/barangMasukSosprom.js"></script>
    <script src="../../script/toast.js"></script>
</body>

</html>